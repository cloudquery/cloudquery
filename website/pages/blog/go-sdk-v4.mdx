---
title: What's new in CloudQuery Go SDK v4
tag: product
date: 2023/07/10
description: >-
  Summary of CloudQuery Go SDK v4 changes and features
author: yevgenypats
---

import { BlogHeader } from "../../components/BlogHeader"

<BlogHeader/>

We are thrilled to announce the release of the new Go SDK v4, which brings exciting enhancements to writing CloudQuery plugins in Go!

The new Go SDK v4 version utilizes the [gRPC plugin protocol version v3](https://github.com/cloudquery/plugin-pb/blob/main/plugin/v3/plugin.proto) so be sure to check [What's new in CloudQuery Plugin Protocol v3](./proto-v3).

# Overview

Let's begin with a high-level summary before diving deeper into each of the updates:

- **Apache Arrow** - Given the underlying protocol is all arrow the Go SDK also speaks arrow and utilizes the [Apache Arrow Go](https://github.com/apache/arrow/tree/main/go) for data and data types.
- **Unified API for Sources and Destinations** - Similar to the underlying gRPC protocol the Go SDK now also contains only one Plugin API, which enables CloudQuery plugins to function as both source and destination simultaneously.
- **Transition Sync/Write to Streaming API** - Similar to the underlying protocol, The SDK also transitioned the `Sync` and `Write` methods to a streaming-based API, enabling new use cases like Change Data Capture (CDC).

## Apache Arrow

We extensively discussed this update in our previous [blog post](./adopting_apache_arrow_at_cloudquery).
Now, with all our [destinations](../docs/plugins/destinations/overview) migrated to SDK V4, they support over 30 different [Apache Arrow data types](https://arrow.apache.org/docs/python/api/datatypes.html)!

## Unified API

Plugins can now serve both as sources and destination and they have a single entry point [`plugins.NewPlugin`](https://github.com/cloudquery/plugin-sdk/tree/main/plugin).
Plugin author can still choose to implement only `Sync` functionaltiy or only `Write` functionality.

Other big advantages as mentioned in the [What's new in CloudQuery Plugin Protocol v3](./proto-v3) are using
any destination as a backend for incremental syncs.

## Streaming API

Similar to the underlying protocol supported messages for `Sync` and `Write` the Go SDK messages are defined
in [plugin-sdk/message](https://github.com/cloudquery/plugin-sdk/tree/main/message).

With this change to streaming that contain messages we can easily extand the protocol in backward compatible way to
support more messages like `DeleteTable`, `DeleteRecord` to support use-cases such as CDC or other use-cases that requires those kind of data updates.

# Migration Guide

Few things to consider when migrating but for the most part it will be just syntactic change.

Go is not a great language for framework so we made the Plugin SDK very lightweight and move other heavy functionality
to it's own sub-packages which makes it easier to extend and test.

- `schedulers` - Schedulers now live under [plugin-sdk/scheduler](https://github.com/cloudquery/plugin-sdk).
- `writers` - Writers now live under [plugin-sdk/writers](https://github.com/cloudquery/plugin-sdk/tree/main/writers)
- `message` - All messages for `Sync` and `Write` are under [plugin-sdk/message](https://github.com/cloudquery/plugin-sdk/tree/main/message)

If you are migrating sources take a look at our [homebrew plugin PR](https://github.com/cloudquery/cloudquery/pull/11646).

# Summary

We are thrilled about this major release! Don't hesitate to try your hand at developing a new CloudQuery plugin. Feel free to reach out to us on [GitHub](https://github.com/cloudquery/cloudquery) or [Discord](https://cloudquery.io/discord) with any questions or feedback.
