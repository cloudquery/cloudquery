-- Autogenerated by migration tool on 2022-02-15 03:47:00
-- CHANGEME: Verify or edit this file before proceeding

-- Resource: network.interfaces
CREATE TABLE IF NOT EXISTS "azure_network_interfaces" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"cq_fetch_date" timestamp without time zone NOT NULL,
	"subscription_id" text,
	"etag" text,
	"extended_location_name" text,
	"extended_location_type" text,
	"id" text,
	"location" text,
	"name" text,
	"dns_settings_applied_dns_servers" text[],
	"dns_settings_dns_servers" text[],
	"dns_settings_internal_dns_name_label" text,
	"dns_settings_internal_domain_name_suffix" text,
	"dns_settings_internal_fqdn" text,
	"dscp_configuration_id" text,
	"enable_accelerated_networking" boolean,
	"enable_ip_forwarding" boolean,
	"hosted_workloads" text[],
	"mac_address" text,
	"migration_phase" text,
	"network_security_group" jsonb,
	"nic_type" text,
	"primary" boolean,
	"private_endpoint" jsonb,
	"private_link_service" jsonb,
	"provisioning_state" text,
	"resource_guid" text,
	"tap_configurations" jsonb,
	"virtual_machine_id" text,
	"tags" jsonb,
	"type" text,
	CONSTRAINT azure_network_interfaces_pk PRIMARY KEY(cq_fetch_date,subscription_id,id),
	UNIQUE(cq_fetch_date,cq_id)
);
SELECT setup_tsdb_parent('azure_network_interfaces');
CREATE TABLE IF NOT EXISTS "azure_network_interface_ip_configurations" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"cq_fetch_date" timestamp without time zone NOT NULL,
	"interface_cq_id" uuid,
	"id" text,
	"name" text,
	"etag" text,
	"type" text,
	"primary" boolean,
	"application_gateway_backend_address_pools" jsonb,
	"application_security_groups" jsonb,
	"load_balancer_backend_address_pools" jsonb,
	"load_balancer_inbound_nat_rules" jsonb,
	"private_ip_address" text,
	"private_ip_address_version" text,
	"private_ip_allocation_method" text,
	"private_link_connection_properties" text,
	"provisioning_state" text,
	"public_ip_address" text,
	"subnet_id" text,
	"virtual_network_taps" jsonb,
	CONSTRAINT azure_network_interface_ip_configurations_pk PRIMARY KEY(cq_fetch_date,interface_cq_id,id),
	UNIQUE(cq_fetch_date,cq_id)
);
CREATE INDEX ON azure_network_interface_ip_configurations (cq_fetch_date, interface_cq_id);
SELECT setup_tsdb_child('azure_network_interface_ip_configurations', 'interface_cq_id', 'azure_network_interfaces', 'cq_id');

-- Resource: servicebus.namespaces
CREATE TABLE IF NOT EXISTS "azure_servicebus_namespaces" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"cq_fetch_date" timestamp without time zone NOT NULL,
	"subscription_id" text,
	"sku_name" text,
	"sku_tier" text,
	"sku_capacity" integer,
	"identity_principal_id" text,
	"identity_tenant_id" text,
	"identity_type" text,
	"user_assigned_identities" jsonb,
	"system_data" jsonb,
	"location" text,
	"tags" jsonb,
	"id" text,
	"name" text,
	"type" text,
	"provisioning_state" text,
	"status" text,
	"created_at" timestamp without time zone,
	"updated_at" timestamp without time zone,
	"service_bus_endpoint" text,
	"metric_id" text,
	"zone_redundant" boolean,
	"key_vault_properties" jsonb,
	"key_source" text,
	"require_infrastructure_encryption" boolean,
	"disable_local_auth" boolean,
	CONSTRAINT azure_servicebus_namespaces_pk PRIMARY KEY(cq_fetch_date,subscription_id,id),
	UNIQUE(cq_fetch_date,cq_id)
);
SELECT setup_tsdb_parent('azure_servicebus_namespaces');
CREATE TABLE IF NOT EXISTS "azure_servicebus_namespace_private_endpoint_connections" (
	"cq_id" uuid NOT NULL,
	"cq_meta" jsonb,
	"cq_fetch_date" timestamp without time zone NOT NULL,
	"namespace_cq_id" uuid,
	"id" text,
	"name" text,
	"type" text,
	"system_data" jsonb,
	"status" text,
	"status_description" text,
	"provisioning_state" text,
	CONSTRAINT azure_servicebus_namespace_private_endpoint_connections_pk PRIMARY KEY(cq_fetch_date,cq_id),
	UNIQUE(cq_fetch_date,cq_id)
);
CREATE INDEX ON azure_servicebus_namespace_private_endpoint_connections (cq_fetch_date, namespace_cq_id);
SELECT setup_tsdb_child('azure_servicebus_namespace_private_endpoint_connections', 'namespace_cq_id', 'azure_servicebus_namespaces', 'cq_id');
