kind: source
spec:
  # Source spec section
  name: aws
  # path: cloudquery/aws
  # version: "v17.4.0"
  path: localhost:7777
  registry: grpc
  tables: ["*"]
  concurrency: 100
  skip_tables:
    - aws_ec2_vpc_endpoint_services 
    - aws_cloudtrail_events
    - aws_docdb_cluster_parameter_groups
    - aws_docdb_engine_versions
    - aws_ec2_instance_types
    - aws_elasticache_engine_versions
    - aws_elasticache_parameter_groups
    - aws_elasticache_reserved_cache_nodes_offerings
    - aws_elasticache_service_updates
    - aws_iam_group_last_accessed_details
    - aws_iam_policy_last_accessed_details
    - aws_iam_role_last_accessed_details
    - aws_iam_user_last_accessed_details
    - aws_neptune_cluster_parameter_groups
    - aws_neptune_db_parameter_groups
    - aws_rds_cluster_parameter_groups
    - aws_rds_db_parameter_groups
    - aws_rds_engine_versions
    - aws_servicequotas_services

  destinations: ["postgresql"]
  spec: 
    # AWS Spec section described below
    accounts:
      - id: "account1"
        local_profile: "AdministratorAccess-615713231484"
    aws_debug: false

---
kind: destination
spec:
  name: "postgresql"
  # registry: "github"
  # path: "cloudquery/postgresql"
  # version: "v4.1.1"
  path: localhost:7778
  registry: grpc
  migrate_mode: forced
  spec:
    connection_string: "postgresql://postgres:pass@localhost:5432/postgres?sslmode=disable"